<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring 源码 | WANGJIYAUN</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/x-icon" href="/img/logo.ico">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
    <meta name="description" content="懒得翻身的咸鱼">
    
    <link rel="preload" href="/assets/css/0.styles.f931473a.css" as="style"><link rel="preload" href="/assets/js/app.71179a1c.js" as="script"><link rel="preload" href="/assets/js/2.b44b4809.js" as="script"><link rel="preload" href="/assets/js/26.14c69bf4.js" as="script"><link rel="prefetch" href="/assets/js/10.21bb6e9c.js"><link rel="prefetch" href="/assets/js/11.a6f6c7e1.js"><link rel="prefetch" href="/assets/js/12.92e0ff90.js"><link rel="prefetch" href="/assets/js/13.6819fc77.js"><link rel="prefetch" href="/assets/js/14.a2f67803.js"><link rel="prefetch" href="/assets/js/15.77114c3a.js"><link rel="prefetch" href="/assets/js/16.e0003386.js"><link rel="prefetch" href="/assets/js/17.cdeed925.js"><link rel="prefetch" href="/assets/js/18.7579ee3c.js"><link rel="prefetch" href="/assets/js/19.9d3c72cc.js"><link rel="prefetch" href="/assets/js/20.c05479c1.js"><link rel="prefetch" href="/assets/js/21.7b69d5ed.js"><link rel="prefetch" href="/assets/js/22.cd39376a.js"><link rel="prefetch" href="/assets/js/23.6cc46bc4.js"><link rel="prefetch" href="/assets/js/24.5c8004a6.js"><link rel="prefetch" href="/assets/js/25.f61ff141.js"><link rel="prefetch" href="/assets/js/27.784dce59.js"><link rel="prefetch" href="/assets/js/28.63053e9a.js"><link rel="prefetch" href="/assets/js/29.ff73fe88.js"><link rel="prefetch" href="/assets/js/3.5aefe87b.js"><link rel="prefetch" href="/assets/js/4.2e219475.js"><link rel="prefetch" href="/assets/js/5.934eb362.js"><link rel="prefetch" href="/assets/js/6.b994a7fc.js"><link rel="prefetch" href="/assets/js/7.95649921.js"><link rel="prefetch" href="/assets/js/8.185adbc5.js"><link rel="prefetch" href="/assets/js/9.5d6a5cd6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f931473a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><div class="loading"><div><div class="loader"></div> <div class="text">正在加载中~</div></div></div> <div id="landlord" data-v-1c077c9b><div class="chat-box" data-v-1c077c9b></div> <audio id="mp3" controls="controls" controlsList="nodownload" hidden="hidden" data-v-1c077c9b><source type="audio/mp3" data-v-1c077c9b></audio> <div class="robot-box robot" data-v-f412ca4a data-v-1c077c9b><input type="text" placeholder="回车或点击发送和我聊天吧~" value="" data-v-f412ca4a> <div class="btn" data-v-f412ca4a>发送</div></div> <canvas id="live2d" width="280" height="250" class="live2d" data-v-1c077c9b></canvas></div> <div class="bg"></div> <div class="index-box" data-v-82e3e2fc><div class="nav-box" data-v-0bc0d532 data-v-82e3e2fc><div class="search-nav"><div class="search-box" data-v-6597e726><input autofocus="autofocus" placeholder="搜索" value="" data-v-6597e726> <!----></div></div> <div class="nav"></div> <div class="info-box" data-v-0bc0d532><img src="https://yating.online/res/img/yating.jpg" class="my-phone" data-v-0bc0d532> <div class="info" data-v-0bc0d532><div data-v-0bc0d532><div class="my-name" data-v-0bc0d532>WANGJIYUAN</div> <div class="des" data-v-0bc0d532>懒得翻身的咸鱼</div></div></div></div></div> <div class="box" data-v-69b40e18 data-v-82e3e2fc><div class="tag-box" data-v-69b40e18><div class="tag-item" data-v-69b40e18><div class="tag-name" data-v-69b40e18>全部</div> <div class="tag-num" data-v-69b40e18>0</div></div> </div></div> <div class="content-box" data-v-82e3e2fc><div class="content"><div class="catalog-item-big"><div class="title">
                    
                </div> <div class="article-time">
                    5/16/2021, 9:43:11 PM
                </div></div> <div class="content__default"><h1 id="spring-源码"><a href="#spring-源码" class="header-anchor">#</a> Spring 源码</h1> <h2 id="spring两大核心-ioc-aop"><a href="#spring两大核心-ioc-aop" class="header-anchor">#</a> Spring两大核心：IOC　AOP</h2> <p>１.聊聊Spring</p> <p>２.Bean的生命周期</p> <p>３.循环依赖</p> <p>４.三级缓存</p> <p>５.FactoryBean</p> <h2 id="ioc容器"><a href="#ioc容器" class="header-anchor">#</a> IOC容器</h2> <p>存放各种Bean</p> <h4 id="创建对象的几种方式"><a href="#创建对象的几种方式" class="header-anchor">#</a> 创建对象的几种方式</h4> <p>１.new</p> <p>2.工厂（构造方法）</p> <p>3.反射</p> <h3 id="ioc如何创建对象"><a href="#ioc如何创建对象" class="header-anchor">#</a> IOC如何创建对象</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 第一种方式 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 第二种方式 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span>  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>?</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>反射与工厂</strong></p> <p>1.反射生成对象的基本方式
(1)   Class clazz =  Class.forName(&quot;完全限定名&quot;)</p> <p>​	 (2)   Class clazz =对象.getClass</p> <p>​	(3)	Class clazz = 类.class</p> <p>Bean的创建生命周期</p> <p>class ---&gt; 构造方法 ---&gt; 实例化 ---&gt;对象---&gt;属性填充(eg.@Autowried DI)---&gt;初始化[afterPropertiesSet](#afterPropertiesSet 接口) --&gt;AOP---&gt;放入单例池---&gt;Bean</p> <p>BeanFactory创建对象</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Constructor</span>  ctor <span class="token operator">=</span> classz<span class="token punctuation">.</span><span class="token function">getDeclareConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Object</span> obj <span class="token operator">=</span> ctor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>执行完后实例化了对象</p> <p><strong>PostProcessor：增强器 or 后置处理器</strong> -&gt; 为了扩展实现</p> <p><img src="https://raw.githubusercontent.com/WangJiyuanYo/typora-images/main/image-20210322220918321.png" alt="image-20210322220918321"></p> <h3 id="执行流程"><a href="#执行流程" class="header-anchor">#</a> 执行流程</h3> <p><img src="https://raw.githubusercontent.com/WangJiyuanYo/typora-images/main/image-20210321231443260.jpg" alt="image-20210321231443260"></p> <h3 id="bean的生命周期"><a href="#bean的生命周期" class="header-anchor">#</a> Bean的生命周期</h3> <h4 id="单例bean"><a href="#单例bean" class="header-anchor">#</a> 单例Bean</h4> <p>根据相同的名字，返回同一个对象（不等于单例模式：同一个对象只能创建一次）</p> <p>单例池：CurrentHashMap&lt;beanName,单例Bean对象&gt;</p> <h3 id="something"><a href="#something" class="header-anchor">#</a> Something</h3> <h4 id="afterpropertiesset-接口"><a href="#afterpropertiesset-接口" class="header-anchor">#</a> afterPropertiesSet 接口</h4> <p><code>InitializingBean</code> 接口中的<code>afterPropertiesSet</code> 方法会在初始化Bean后执行方法</p> <p>调用方式：对象 <code>instanceof</code> InitializingBean 若存在<code>afterPropertiesSet</code> 则执行内部的方法</p> <h4 id="beanpsotprocessor"><a href="#beanpsotprocessor" class="header-anchor">#</a> BeanPsotProcessor</h4> <p>一种机制</p> <p>属性填充和AOP基于此机制实现</p></div> <!----> <!----> <div class="over">
            完
            <div class="block"></div></div> <div id="gitalk-container"></div></div> <div class="catalog "><!----> <div class="level1"></div> <a href="#spring两大核心-ioc-aop" nofollow class="level2">Spring两大核心：IOC　AOP</a><a href="#ioc容器" nofollow class="level2">IOC容器</a><a href="#ioc如何创建对象" nofollow class="level3">IOC如何创建对象</a><a href="#执行流程" nofollow class="level3">执行流程</a><a href="#bean的生命周期" nofollow class="level3">Bean的生命周期</a><a href="#something" nofollow class="level3">Something</a> <!----></div> <!----></div></div> <div class="foot"> WANG JIYUAN BLOG</div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.71179a1c.js" defer></script><script src="/assets/js/2.b44b4809.js" defer></script><script src="/assets/js/26.14c69bf4.js" defer></script>
  </body>
</html>
